@charset "UTF-8";

/* 1. 기본 스타일 초기화 & 스크롤바 숨김 */
body, html {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    /* Pretendard 폰트가 없으면 시스템 폰트 사용 */
    font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, Roboto, 'Helvetica Neue', 'Segoe UI', 'Apple SD Gothic Neo', 'Malgun Gothic', sans-serif;
    background-color: #f0f2f5;
    overflow: hidden; /* [중요] 전체 화면 스크롤 방지 */
    box-sizing: border-box;
}

*, *:before, *:after {
    box-sizing: inherit; /* 모든 요소의 패딩이 크기에 포함되도록 설정 */
}

/* 2. 전체 레이아웃 (Flexbox) */
.kiosk-wrapper {
    display: flex;
    flex-direction: column;
    height: 100vh;      /* 화면 전체 높이 */
    max-height: 100vh;  /* 절대 넘치지 않도록 고정 */
}

/* 3. 상단 헤더 */
.header-info {
    flex-shrink: 0; /* [중요] 화면이 좁아져도 헤더는 찌그러지지 않음 */
    text-align: center;
    padding: 15px 25px;
    background-color: #ffffff;
    border-bottom: 2px solid #dee2e6;
}

.header-top-row {
    display: flex;
    align-items: center;
    width: 100%;
    margin-bottom: 10px;
}

/* 3등분 레이아웃 */
.header-section {
    flex: 1;
    display: flex;
    align-items: center;
}
.section-left { justify-content: flex-start; }
.section-center { justify-content: center; }
.section-right { justify-content: flex-end; }

.info-widget {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 1.6rem;
    font-weight: bold;
    color: #495057;
}
.weather-icon { font-size: 2.2rem; }
.kiosk-clock {
    font-size: 2.5rem;
    color: #212529;
    font-weight: 800;
}

.status-indicator {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 1.2rem;
    color: #28a745;
    font-weight: bold;
}
.status-dot {
    width: 15px;
    height: 15px;
    background-color: #28a745;
    border-radius: 50%;
    box-shadow: 0 0 5px rgba(40, 167, 69, 0.5);
}

.header-main-row { padding-top: 5px; }
.recipient-name {
    font-size: 2.8rem;
    font-weight: 900;
    color: #212529;
    margin: 0;
}
.welcome-text {
    font-size: 1.4rem;
    color: #6c757d;
    margin-top: 5px;
    font-weight: 500;
}

/* 4. 메인 컨텐츠 영역 (가장 중요한 수정 부분) */
.main-content {
    flex: 1;          /* 남은 높이 모두 차지 */
    display: flex;    /* 좌우 배치 */
    gap: 20px;
    padding: 20px;

    /* [핵심] 자식 요소(채팅창)가 부모보다 커지려고 할 때 스크롤이 생기게 하려면 필수 */
    min-height: 0;
    overflow: hidden;
}

/* 5. 좌측: AI 말벗 영역 */
.ai-companion-area {
    flex: 3;          /* 3:2 비율 */
    display: flex;
    flex-direction: column;
    background: #ffffff;
    border-radius: 25px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.08);

    height: 100%;     /* 부모 높이(main-content)를 꽉 채움 */
    overflow: hidden; /* 둥근 모서리 유지 */
}

/* 채팅창 스크롤 영역 */
.chat-window {
    flex: 1;            /* 남은 공간 모두 사용 */
    padding: 25px;

    /* [핵심] 내용이 넘치면 세로 스크롤 생성 */
    overflow-y: auto;

    display: flex;
    flex-direction: column;
    gap: 15px;
    background-color: #f8f9fa;
    scroll-behavior: smooth;
}

/* 스크롤바 디자인 (터치하기 좋게 약간 넓게) */
.chat-window::-webkit-scrollbar { width: 12px; }
.chat-window::-webkit-scrollbar-track { background: #f1f1f1; }
.chat-window::-webkit-scrollbar-thumb { background: #ced4da; border-radius: 6px; }
.chat-window::-webkit-scrollbar-thumb:hover { background: #adb5bd; }

/* 메시지 스타일 */
.chat-message {
    display: flex;
    flex-direction: column;
    max-width: 85%;
    animation: fadeIn 0.3s ease-out;
}
@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

.bot-message { align-self: flex-start; }
.user-message { align-self: flex-end; }

.message-bubble {
    padding: 18px 24px;
    font-size: 1.6rem;
    line-height: 1.5;
    border-radius: 20px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    word-break: break-word;
}

.bot-message .message-bubble {
    background-color: #ffffff;
    border: 1px solid #e9ecef;
    border-top-left-radius: 5px;
    color: #343a40;
}

.user-message .message-bubble {
    background-color: #007bff;
    color: white;
    border-top-right-radius: 5px;
}

.message-time {
    font-size: 0.9rem;
    color: #adb5bd;
    margin-top: 5px;
    margin-left: 5px;
}
.user-message .message-time { text-align: right; margin-right: 5px; }

/* 채팅 입력 영역 */
.chat-input-area {
    flex-shrink: 0; /* [핵심] 채팅창이 커져도 입력창 크기는 줄어들지 않음 */
    padding: 20px;
    background-color: #ffffff;
    border-top: 1px solid #dee2e6;
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.speak-button {
    width: 100%;
    padding: 15px;
    border: none;
    border-radius: 15px;
    background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
    color: white;
    font-size: 1.8rem;
    font-weight: bold;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    box-shadow: 0 4px 10px rgba(37, 117, 252, 0.3);
    transition: transform 0.1s;
}
.speak-button:active { transform: scale(0.98); }

.input-group { display: flex; gap: 10px; height: 60px; }

.text-input {
    flex: 1;
    padding: 0 20px;
    font-size: 1.5rem;
    border: 2px solid #e9ecef;
    border-radius: 15px;
    outline: none;
    transition: border-color 0.2s;
}
.text-input:focus { border-color: #007bff; }

.send-button {
    width: 100px;
    border: none;
    border-radius: 15px;
    background-color: #343a40;
    color: white;
    font-size: 1.4rem;
    font-weight: bold;
    cursor: pointer;
}
.send-button:active { background-color: #1d2124; }

/* 6. 우측: 호출 버튼 영역 */
.call-button-area {
    flex: 2;          /* 3:2 비율 */
    display: flex;
    flex-direction: column;
    gap: 20px;
    height: 100%;     /* [핵심] 부모 높이 꽉 채움 */
}

.call-button {
    flex: 1;          /* [핵심] 버튼 2개가 높이를 균등하게 나눠가짐 */
    position: relative;
    border: none;
    border-radius: 25px;
    color: white;
    cursor: pointer;
    box-shadow: 0 4px 15px rgba(0,0,0,0.15);
    overflow: hidden;
    transition: transform 0.1s;
}
.call-button:active { transform: scale(0.98); }

.button-content {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    height: 100%;
}

.button-icon { font-size: 5rem; margin-bottom: 10px; }
.button-text { font-size: 2.5rem; font-weight: 800; }

.emergency { background: linear-gradient(135deg, #ff5f6d, #ffc371); }
.contact { background: linear-gradient(135deg, #11998e, #38ef7d); }

.button-feedback {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.3);
    color: white;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 2rem;
    font-weight: bold;
    opacity: 0;
    transition: opacity 0.3s;
    pointer-events: none;
}